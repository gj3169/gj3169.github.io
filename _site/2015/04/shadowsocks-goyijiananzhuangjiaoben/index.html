
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Shadowsocks-go一键安装脚本</title>
    
    <meta name="author" content="Simon Gong">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes//css/1.4.0/bootstrap.css" rel="stylesheet">
    <link href="/assets/themes//css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="topbar">
      <div class="fill">
        <div class="container">
          <a class="brand" href="/">西蒙宫的博客</a>
          <ul class="nav">
            
            
            


  
    
      
      	
      	<li><a href="/archive">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags">Tags</a></li>
      	
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        
<div class="page-header">
  <h1>Shadowsocks-go一键安装脚本 <small>Supporting tagline</small></h1>
</div>

<div class="row">
  <div class="span10">
    <p>现在goagent已经不好用了，VPN 经常被ban，估计只有shadowsocks还算稳定，天知道还能撑多久，从网上找来一个一键安装脚本，感觉非常不错，感谢秋水逸冰的辛勤劳动！附上他的链接如下</p>

<p>转载自秋水逸冰的博客 http://teddysun.com/392.html/comment-page-1</p>

<p>本人亲测，非常好用！</p>

<p><strong>本脚本适用环境：</strong><br />
系统支持：CentOS，Debian，Ubuntu<br />
内存要求：≥128M<br />
日期：2015年03月09日</p>

<p><strong>关于本脚本：</strong><br />
一键安装 go 版的 shadowsocks 最新版本 1.1.3。据说 go 版本有 buff ，但是我没看到。与 python 版不同的是，其客户端程序能使用多个服务端配置，但是本脚本安装的是服务端。作者默认推荐 aes-128-cfb 加密，基于一致性的决定，脚本还是使用了 aes-256-cfb 加密方式。<br />
<strong>友情提示：如果你有问题，请先参考这篇《<a href="http://teddysun.com/399.html" target="_blank">Shadowsocks Troubleshooting</a>》后再问。</strong></p>

<p><strong>默认配置：</strong><br />
服务器端口：8989<br />
客户端端口：1080<br />
密码：自己设定（如不设定，默认为teddysun.com）</p>

<p><strong>客户端下载：</strong><br />
<a href="http://sourceforge.net/projects/shadowsocksgui/files/dist/" target="_blank">http://sourceforge.net/projects/shadowsocksgui/files/dist/</a></p>

<p><strong>使用方法：</strong><br />
使用root用户登录，运行以下命令：</p>

<pre class="prettyprint lang-bsh">wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-go.sh
chmod +x shadowsocks-go.sh
./shadowsocks-go.sh 2&gt;&amp;1 | tee shadowsocks-go.log</pre>

<p>安装完成后，脚本提示如下：</p>

<pre class="prettyprint lang-bsh">Congratulations, shadowsocks-go install completed!
Your Server IP:your_server_ip
Your Server Port:8989
Your Password:your_password
Your Local Port:1080
Your Encryption Method:aes-256-cfb

Welcome to visit:http://teddysun.com/392.html
Enjoy it!</pre>

<p><strong>卸载方法：</strong><br />
使用 root 用户登录，运行以下命令：</p>

<pre class="prettyprint lang-bsh">./shadowsocks-go.sh uninstall</pre>

<p><strong>其他事项：</strong><br />
客户端配置的参考链接：<a href="http://teddysun.com/339.html" target="_blank">http://teddysun.com/339.html</a></p>

<p>安装完成后即已后台启动 shadowsocks-go ，运行：</p>

<pre class="prettyprint lang-bsh">/etc/init.d/shadowsocks status</pre>

<p>可以查看 shadowsocks-go 进程是否存在。<br />
本脚本安装完成后，已将 shadowsocks-go 加入开机自启动。</p>

<p><strong>使用命令：</strong><br />
启动：/etc/init.d/shadowsocks start<br />
停止：/etc/init.d/shadowsocks stop<br />
重启：/etc/init.d/shadowsocks restart<br />
状态：/etc/init.d/shadowsocks status</p>

<p><strong>多用户多端口配置文件 sample（2015年01月08日）：</strong><br />
配置文件路径：/etc/shadowsocks/config.json</p>

<pre class="prettyprint">{
    "port_password":{
         "8989":"password0",
         "9001":"password1",
         "9002":"password2",
         "9003":"password3",
         "9004":"password4"
    },
    "method":"aes-256-cfb",
    "timeout":600
}</pre>

<p>官方版本的 sample ，详见<a href="https://github.com/shadowsocks/shadowsocks-go/blob/master/sample-config/server-multi-port.json" target="_blank">这里</a>。</p>

<p><strong>更多版本 shadowsocks 安装：</strong><br />
<a href="http://teddysun.com/342.html">Shadowsocks Python版一键安装脚本（CentOS，Debian，Ubuntu）</a><br />
<a href="http://teddysun.com/357.html">CentOS 下 shadowsocks-libev 一键安装脚本</a><br />
<a href="http://teddysun.com/358.html">Debian 下 shadowsocks-libev 一键安装脚本</a></p>

<p><strong>特别说明：</strong><br />
1、关于 CentOS 的默认 iptables 防火墙规则 icmp-host-prohibited ，如果安装之后发现已经启动 shadowsocks，本地客户端却不能连接上，请检查 iptables 是不是有如下的一条规则：</p>

<pre class="prettyprint lang-bsh">REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited</pre>

<p>运行命令：</p>

<pre class="prettyprint lang-bsh">/etc/init.d/iptables status</pre>

<p>可以查看。如果有这条规则，则添加的 8989 端口需手动更改一下，放到这条规则的上一行。编辑 /etc/sysconfig/iptables 文件，将：</p>

<pre class="prettyprint lang-bsh">-A INPUT -p tcp -m state --state NEW -m tcp --dport 8989 -j ACCEPT</pre>

<p>放在：</p>

<pre class="prettyprint lang-bsh">-A INPUT -j REJECT --reject-with icmp-host-prohibited</pre>

<p>的前面。最终效果如下：</p>

<pre class="prettyprint lang-bsh">-A INPUT -p tcp -m state --state NEW -m tcp --dport 8989 -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited</pre>

<p>编辑完后，重启 iptables 防火墙。命令：/etc/init.d/iptables restart</p>

<p><strong>更新日志：</strong><br />
更新（2015年03月09日）：新增支持在 Debian，Ubuntu 下安装。<br />
更新（2015年01月08日）：修改了启动脚本 /etc/init.d/shadowsocks ，按照 CentOS 的 chkconfig 标准语法修改了一下（原来使用的是作者 Github 上自带的）。去掉了以 nobody 用户启动 shadowsocks 的方式，改为直接以当前登录用户直接启动（一般是 root 用户）。开机自启动，以及修改端口号提示无权限的问题已经解决。<br />
更新（2015年01月07日）：支持在 CentOS 5，6 及 7 下安装。注意，在 CentOS 7 中默认是没有 iptables 的，如果你开启了 firewalld ，请手动对端口放行。</p>


    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/2015/04/pichulifangfajiejuewuxianwangbudingqishouxianwenti/" title="批处理方法 解决无线网不定期“受限”问题">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/2015/04/yigematlabguishiyonglizipop-upmenudeyongfa/" title="一个matlab GUI使用例子，pop-up menu的用法">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <!-- Duoshuo Comment BEGIN -->
  <div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:'ximenggong'};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- Duoshuo Comment END -->




  </div>
  
  <div class="span4">
    <h4>Published</h4>
    <div class="date"><span>17 April 2015</span></div>

  
    <h4>Tags</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="/tags.html#centos-ref">centos <span>1</span></a></li>
     
    	<li><a href="/tags.html#debian-ref">debian <span>1</span></a></li>
     
    	<li><a href="/tags.html#linux-ref">linux <span>3</span></a></li>
     
    	<li><a href="/tags.html#shadowsocks-ref">shadowsocks <span>4</span></a></li>
     
    	<li><a href="/tags.html#一键-ref">一键 <span>1</span></a></li>
     
    	<li><a href="/tags.html#脚本-ref">脚本 <span>1</span></a></li>
    
  



    </ul>
    
  </div>
</div>


      </div>

      <footer>
        <p>&copy; Simon Gong 2012 
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div> <!-- /container -->

    



  </body>
</html>

